
### 停止维护
> 该项目已停止维护（2017~2022），如果需要背景音乐插件可以看看这个基于aplayerJs的插件https://github.com/jrotty/AplayerFixed


# YoduPlayer

一款支持 instantclick 的背景音乐播放器插件（typecho博客插件）

> 1，支持自定义播放器css

> 2，支持显示歌曲名称，歌手，封面等

> 3，无 JQ，要求使用现代浏览器。

### 使用方法

下载压缩包, 解压，得到名为YoduPlayer的文件夹，如果不是请将文件夹重命名为YoduPlayer，之后上传到你博客中的 /usr/plugins 目录，在后台启用即可

插件后台配置歌曲格式: 
```
{title:"xxx", artist:"xxx", cover:"http:xxxx", mp3:"http:xxxx",cover:"图片地址",} ，每个歌曲之间用英文,隔开。
```
**注意事项：** 由于歌曲信息是存在数据库的而数据库类型为`text`，所以歌曲信息的长度是有限制的，所以建议歌曲数量不易超过200首，如果无心触发这个问题首页和插件设置页将报错此时禁用插件重新启动即可。


### 网易云/QQ音乐歌单
得益于[meting-api](https://github.com/injahow/meting-api)，插件自2.4.5版本开始支持填写网易云或QQ音乐歌单id来调用歌曲。
请确保`cache/playlist`文件夹权限可被写入，一般推荐权限为755/www。

### Thanks

- [Meting](https://github.com/metowolf/Meting)
- [meting-api](https://github.com/injahow/meting-api)


### 更新历史

> 20221123发布2.6.5版本，更换默认封面与音频，优化变色逻辑，加入提示信息等

> 20221120发布2.6.1版本，取消夜间模式配色，改为根据封面自动设置背景色

> 20221015修复api域名偶尔获取错误问题，提升稳定性

> 20220707修复疑似缓存不刷新bug，发布2.5.5版本

> 20220610加入禁用函数时自动删除缓存，避免秘钥变化与旧缓存冲突

> 20220609解决歌曲出错自动播放下一曲功能导致的报错循环问题

> 20220411内置网易云与qq音乐歌单api

> 20220331使用svg替换默认的字体图标，简化js，删除残余php代码，修复某些情况返回时歌曲列表重复生成问题，加入歌曲列表展开动画，歌曲列表字体大小调整，火狐滚动条样式适配。

> 20220328发布2.3.3版本，暂停歌曲头像停止旋转时保持当前转动角度，优化歌曲列表歌曲名字过长导致的频繁换行影响美观的问题，php相关判断代码优化，歌手名字为空时样式优化，默认封面与音乐更换。

> 20220327发布2.3.1修复切换页面后歌手名字重复输出问题。

> 2022,03,26发布2.3.0版本，去除掉yodu主题相关定制功能，去除掉皮肤系统，去除掉自动播放设置，适配夜间模式需要博客启动夜间模式时给html或者body加class=”dark“，其他细节微调整。

> 2022,03,26，去除1.6版本之后开始的jq依赖，css简单优化，支持设置顶部间距，以及采纳 @daxiyun 出错调下一首歌曲的代码
